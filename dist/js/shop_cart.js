!function(){function t(){var t=$(".content_gw").find("[names=checkId]"),e=0;$.each(t,function(t,a){if(1==$(a).prop("checked")){var i=parseInt($(a).parents(".gwu_inf").find(".inf_sum_price").html());e+=i}}),$(".price_hd").html(e),$("#sum_price").html(e)}!function(){var t=$.cookie("shangp");if(t){var e=t.split("|"),a=[];$.each(e,function(t,e){var i=e.split("#");if(t)for(var n=!0,r=0;r<a.length;r++)a[r]==i[1]&&(n=!1),n&&r==a.length-1&&a.push(i[1]);else a.push(i[1])}),$.each(a,function(t,a){for(var i='<div class="gwu_body"><p class="gwu_body_title"><label><input type="checkbox" names=\'checkPPId\' checked="true" >'+a+'</label></p><div class="gwu_body_co"><div class="gwu_body_content"><div class="gwu_content_top"><div class="price_hd">168</div></div></div>',n=0,r=0;r<e.length;r++){var s=e[r].split("#");s[1]==a&&(i+='<ul class="gwu_inf"><li class="inf_wd400"><label class="fl"><input type="checkbox" names="checkId" checked="true" ></label><div class="inf_img fl"><a href="'+s[5]+'"><img src="'+s[2]+'" ></a></div><div class="inf_Text fl"><a href="'+s[5]+'" target="_bank">'+s[4]+'</a></div></li><li class="ing_wd240 fl"><span class="inf_colorSize">'+s[6]+'</span></li><li class="gwu_wd_100 fl"><p class="inf_price">'+s[3]+'</p></li><li class="gwu_wd_100 fl"><div class="inf_add_count"><b class="fl" name="deta_count">-</b><input class="fl" type="text" pid="'+s[0]+'" siz="'+s[6]+'" value="'+s[7]+'"><b class="fl" name="add_count">+</b></div></li><li class="gwu_wd_100 fl"><span class="inf_sum_price">'+parseInt(s[3])*parseInt(s[7])+'</span></li><li class="gwu_wd_100 fl"><a href="javascript:void(0);" att="'+s[6]+'" pid="'+s[0]+'" class="inf_bttn">删除</a><a href="javascript:;" class="inf_bttn mt5">加入关注</a></li><div class="clear"></div></ul>',n+=parseInt(s[3])*parseInt(s[7]))}i+="</div></div>",$(i).insertBefore("#gwu_footer"),$("#gwu_footer").prev().find(".price_hd").html(n),$("#sum_price").html(n)})}}(),$("#content_gw").click(function(e){if("inf_bttn"===$(e.target).attr("class")){var a=$(e.target).attr("pid"),i=$(e.target).attr("att");console.log(a,i),opeateCookie.removePid(a,i),$(e.target).parent().parent().remove()}if("deta_count"===$(e.target).attr("name")){var n=parseInt($(e.target).next().val())-1;if(!n)return;var a=$(e.target).next().attr("pid"),i=$(e.target).next().attr("siz");opeateCookie.addPid(a,i,!1);var r=$(e.target).parent().parent(),s=n*parseInt(r.prev().find("p").html());r.next().find("span").html(s),$(e.target).next().val(n),t()}if("add_count"===$(e.target).attr("name")){var n=parseInt($(e.target).prev().val())+1,r=$(e.target).parent().parent(),s=n*parseInt(r.prev().find("p").html()),a=$(e.target).prev().attr("pid"),i=$(e.target).prev().attr("siz");opeateCookie.addPid(a,i,!0),r.next().find("span").html(s),$(e.target).prev().val(n),t()}if("checkId"===$(e.target).attr("names")){var r=$(e.target).parents(".gwu_body"),c=$(e.target).prop("checked");if(c){var l=r.find("[names=checkId]"),o=!0;$.each(l,function(t,e){if(0==$(e).prop("checked"))return o=!1,!1}),o&&r.find("[names=checkPPId]").prop("checked",!0)}else r.find("[names=checkPPId]").prop("checked",!1)}}),$(".gwu_body").click(function(t){if("checkPPId"===$(t.target).attr("names"))if(1==$(t.target).prop("checked")){var e=$(t.target).parents(".gwu_body").find("[names=checkId]");$.each(e,function(t,e){$(e).prop("checked",!0)})}else{var e=$(t.target).parents(".gwu_body").find("[names=checkId]");$.each(e,function(t,e){$(e).prop("checked",!1)})}});var e=function(){this.data=[],this.ulWidth=0,this.hide="none"};e.prototype={addHtml:function(){var t=this.data.length;if(t){this.ulWidth=200*t,this.$ulDom=$("<ul></ul>").appendTo("#other_shop").css({display:this.hide,width:this.ulWidth}).addClass("shop_box_ul");var e=this;$.each(this.data,function(t,a){var i='<li><a href="+o.getpath+" class="shop_imgDiv"><img src="'+a.pic+'" alt=""></a><p class="shop_content"><a href="'+a.getpath+'">'+a.introduce+'</a></p><p class="mt_20_price">¥'+a.price+'</p><a href="'+a.getpath+'" class="go_shop_cart">立即购买</a></li>';e.$ulDom.append(i)})}},addDom:function(){$("#other_shop_ul").attr("index",0),$("#other_shop_ul").attr("flag",!0),$("#other_shop_ul").on("click",function(t){if($(t.target).is("li")){$(this).children().removeClass("cur");var e=$(t.target).addClass("cur").index();$("#other_shop>ul").hide().eq(e).show(),$(this).attr("index",e)}}),$(document).on("click",".shop_box_left,.shop_box_right",function(t){if("false"!=$("#other_shop_ul").attr("flag")){$("#other_shop_ul").attr("flag",!1);var e=$("#other_shop_ul").attr("index"),a=$("#other_shop>ul").eq(e),i=parseInt(a.css("left")),n=a.width();"shop_box_left"==$(t.target).attr("class")?i<0?a.animate({left:i+1e3},800,function(){$("#other_shop_ul").attr("flag",!0)}):a.animate({left:1e3-n},800,function(){$("#other_shop_ul").attr("flag",!0)}):i+n>1e3?a.animate({left:i-1e3},800,function(){$("#other_shop_ul").attr("flag",!0)}):a.animate({left:0},800,function(){$("#other_shop_ul").attr("flag",!0)})}}),$("#other_shop_hover").hover(function(){$(this).find("i").show()},function(){$(this).find("i").hide()})}};var a=new e;a.addDom(),$.ajax({method:"get",url:"../sever/shop_cart.json",success:function(t){a.data=t,a.hide="block",a.addHtml()},error:function(t){console.log(t)}})}();